<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating individuals â€¢ ospsuite</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating individuals">
<meta property="og:description" content="ospsuite">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ospsuite</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">10.0.72</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/ospsuite.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li class="dropdown-header">Primary functions</li>
    <li>
      <a href="../articles/load-get.html">Loading a simulation and accessing entities</a>
    </li>
    <li>
      <a href="../articles/set-values.html">Changing parameter and molecule start values</a>
    </li>
    <li>
      <a href="../articles/run-simulation.html">Running a simulation</a>
    </li>
    <li>
      <a href="../articles/pk-analysis.html">Calculating PK parameters of simulation outputs</a>
    </li>
    <li>
      <a href="../articles/sensitivity-analysis.html">Sensitivity analysis</a>
    </li>
    <li>
      <a href="../articles/create-individual.html">Creating individuals</a>
    </li>
    <li>
      <a href="../articles/create-run-population.html">Population simulations</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Miscellaneous</li>
    <li>
      <a href="../articles/efficient-calculations.html">Efficient calculation</a>
    </li>
    <li>
      <a href="../articles/table-parameters.html">Table parameters</a>
    </li>
    <li>
      <a href="../articles/unit-conversion.html">Dimensions and Units</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/open-systems-pharmacology/ospsuite-r/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="create-individual_files/header-attrs-2.11/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Creating individuals</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/open-systems-pharmacology/ospsuite-r/blob/master/vignettes/create-individual.Rmd" class="external-link"><code>vignettes/create-individual.Rmd</code></a></small>
      <div class="hidden name"><code>create-individual.Rmd</code></div>

    </div>

    
    
<p>The ospsuite-R package provides an interface to the PK-Sim physiology database to create parameter sets describing a certain <strong>individual</strong>. By applying these parameter values to a simulation, it is possible to simulate different individuals based on one exported *.pkml simulation. This functionality is only available when PK-Sim is installed on the system.</p>
<p>The easier way to get started is to install the OSPSuite Setup. This will link PK-Sim to your ospsuite-R installation automatically. If the portable version of PK-Sim is used instead, one must specify the path to the PK-Sim folder by calling the function <code>initPKSim</code>:</p>
<div id="creating-individuals" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-individuals" class="anchor" aria-hidden="true"></a>Creating individuals</h2>
<p>The physiology of an individual is defined by the values of the simulation parameters. To simulate a specific individual, one has to generate a set of parameter values and apply these values to the model. <strong>NOTE</strong>: Currently, only individuals of the <em>same</em> species as in the original *.pkml simulation can be applied. I.e., if the simulation exported from PK-Sim represents a human individual, it is possible to simulate another human individual of different race, gender, etc., but it is not possible to simulate a rat. Though it is technically possible, and the simulation will produce some results, these will not valid.</p>
<p>The first step is creating an object describing <em>individual characteristics</em>. To see the list of available values for the arguments <code>species</code>, <code>population</code> (only for human), and <code>gender</code> (only for human), use the enums <code>Species</code>, <code>HumanPopulation</code>, and <code>Gender</code>, respectively. This object is then passed to the function <code>createIndividual</code> to generate a set of parameter values. The algorithm behind is the same used in PK-Sim when creating an Individual-Building Block.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/open-systems-pharmacology/ospsuite-r" class="external-link">ospsuite</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: rClr</span>
<span class="co">#&gt; Loading the dynamic library for Microsoft .NET runtime...</span>
<span class="co">#&gt; Loaded Common Language Runtime version 4.0.30319.42000</span>

<span class="co">#If no unit is specified, the default units are used. For "weight" it is "kg", for "age" it is "year(s)".</span>
<span class="va">individualCharacteristics</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createIndividualCharacteristics.html">createIndividualCharacteristics</a></span><span class="op">(</span>species <span class="op">=</span> <span class="va">Species</span><span class="op">$</span><span class="va">Human</span>,
                                                            population <span class="op">=</span> <span class="va">HumanPopulation</span><span class="op">$</span><span class="va">Japanese_Population</span>,
                                                            gender <span class="op">=</span> <span class="va">Gender</span><span class="op">$</span><span class="va">Female</span>,
                                                            weight <span class="op">=</span> <span class="fl">75</span>,
                                                            height <span class="op">=</span> <span class="fl">1.75</span>,
                                                            heightUnit <span class="op">=</span> <span class="st">"m"</span>,
                                                            age <span class="op">=</span> <span class="fl">43</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">individualCharacteristics</span><span class="op">)</span>
<span class="co">#&gt; IndividualCharacteristics: </span>
<span class="co">#&gt;   Species: Human</span>
<span class="co">#&gt;   Population: Japanese_Population</span>
<span class="co">#&gt;   Gender: FEMALE</span>
<span class="co">#&gt;   Age: 43.00 [year(s)]</span>
<span class="co">#&gt;   Gestational age: 40.00 [week(s)]</span>
<span class="co">#&gt;   Weight: 75.00 [kg]</span>
<span class="co">#&gt;   Height: 1.75 [m]</span>

<span class="va">individual</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createIndividual.html">createIndividual</a></span><span class="op">(</span>individualCharacteristics <span class="op">=</span> <span class="va">individualCharacteristics</span><span class="op">)</span></code></pre></div>
<p>The output contains two lists of parameters - <code>distributedParameters</code> and <code>derivedParameters</code>. The first list contains parameters that differ between the individuals of the selected species, while the second list mostly consists of values of parameters defined by formulas in the simulation. When applying the generated individual parameter set to a simulation in R, only parameters from the <code>distributedParameters</code> should be overwritten, otherwise formula dependencies may be destroyed. Generated parameter values can be conveniently applied using the <code>setParameterValuesByPath</code> method:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/open-systems-pharmacology/ospsuite-r" class="external-link">ospsuite</a></span><span class="op">)</span>

<span class="co"># Load simulation</span>
<span class="va">simFilePath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Aciclovir.pkml"</span>, package <span class="op">=</span> <span class="st">"ospsuite"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">simFilePath</span><span class="op">)</span>
<span class="co">#&gt; [1] "C:/Users/Michael/AppData/Local/Temp/RtmpWyOrto/temp_libpath194861ee5c0b/ospsuite/extdata/Aciclovir.pkml"</span>
<span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loadSimulation.html">loadSimulation</a></span><span class="op">(</span><span class="va">simFilePath</span><span class="op">)</span>

<span class="co"># Apply individual parameters</span>
<span class="fu"><a href="../reference/setParameterValuesByPath.html">setParameterValuesByPath</a></span><span class="op">(</span>parameterPaths <span class="op">=</span> <span class="va">individual</span><span class="op">$</span><span class="va">distributedParameters</span><span class="op">$</span><span class="va">paths</span>,
                         values <span class="op">=</span> <span class="va">individual</span><span class="op">$</span><span class="va">distributedParameters</span><span class="op">$</span><span class="va">values</span>,
                         simulation <span class="op">=</span> <span class="va">sim</span><span class="op">)</span></code></pre></div>
</div>
<div id="adding-enzyme-ontogenies" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-enzyme-ontogenies" class="anchor" aria-hidden="true"></a>Adding enzyme ontogenies</h2>
<p>The PK-Sim database includes ontogeny information for some proteins (see (PK-Sim Ontogeny Database)[<a href="https://github.com/Open-Systems-Pharmacology/OSPSuite.Documentation/blob/master/PK-Sim%20Ontogeny%20Database%20Version%207.3.pdf" class="external-link uri">https://github.com/Open-Systems-Pharmacology/OSPSuite.Documentation/blob/master/PK-Sim%20Ontogeny%20Database%20Version%207.3.pdf</a>]). For a protein molecule present in the simulation, it is possible to add the ontogeny information on one of the pre-defined proteins. For example, it is possible to set the ontogeny of the protein <code>MyProtein</code> to the value of the ontogeny of a CYP3A4 enzyme for the specified individual. The list of supported ontogenies is stored in the <code>StandardOntogeny</code>-list.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/open-systems-pharmacology/ospsuite-r" class="external-link">ospsuite</a></span><span class="op">)</span>

<span class="co"># All supported ontogenies</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">StandardOntogeny</span><span class="op">)</span>
<span class="co">#&gt; $CYP1A2</span>
<span class="co">#&gt; [1] "CYP1A2"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $CYP2C18</span>
<span class="co">#&gt; [1] "CYP2C18"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $CYP2C19</span>
<span class="co">#&gt; [1] "CYP2C19"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $CYP2C8</span>
<span class="co">#&gt; [1] "CYP2C8"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $CYP2C9</span>
<span class="co">#&gt; [1] "CYP2C9"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $CYP2D6</span>
<span class="co">#&gt; [1] "CYP2D6"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $CYP2E1</span>
<span class="co">#&gt; [1] "CYP2E1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $CYP3A4</span>
<span class="co">#&gt; [1] "CYP3A4"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $CYP3A5</span>
<span class="co">#&gt; [1] "CYP3A5"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $CYP3A7</span>
<span class="co">#&gt; [1] "CYP3A7"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $UGT1A1</span>
<span class="co">#&gt; [1] "UGT1A1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $UGT1A4</span>
<span class="co">#&gt; [1] "UGT1A4"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $UGT1A6</span>
<span class="co">#&gt; [1] "UGT1A6"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $UGT1A9</span>
<span class="co">#&gt; [1] "UGT1A9"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $UGT2B4</span>
<span class="co">#&gt; [1] "UGT2B4"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $UGT2B7</span>
<span class="co">#&gt; [1] "UGT2B7"</span>

<span class="co">#Create the ontogeny for the protein "MyProtein" based on ontology of CYP3A4</span>
<span class="va">myProteinOntogeny</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/MoleculeOntogeny.html">MoleculeOntogeny</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>molecule <span class="op">=</span> <span class="st">"MyProtein"</span>, ontogeny <span class="op">=</span> <span class="va">StandardOntogeny</span><span class="op">$</span><span class="va">CYP3A4</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">myProteinOntogeny</span><span class="op">)</span>
<span class="co">#&gt; MoleculeOntogeny: </span>
<span class="co">#&gt;   Molecule: MyProtein</span>
<span class="co">#&gt;   Ontogeny: CYP3A4</span>

<span class="co"># Add this ontogeny to the individual characteristics used to create the individual parameters set</span>
<span class="va">individualCharacterstics</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createIndividualCharacteristics.html">createIndividualCharacteristics</a></span><span class="op">(</span>species <span class="op">=</span> <span class="va">Species</span><span class="op">$</span><span class="va">Human</span>,
                                                            population <span class="op">=</span> <span class="va">HumanPopulation</span><span class="op">$</span><span class="va">Japanese_Population</span>,
                                                            gender <span class="op">=</span> <span class="va">Gender</span><span class="op">$</span><span class="va">Female</span>,
                                                            weight <span class="op">=</span> <span class="fl">75</span>,
                                                            height <span class="op">=</span> <span class="fl">1.75</span>,
                                                            heightUnit <span class="op">=</span> <span class="st">"m"</span>,
                                                            age <span class="op">=</span> <span class="fl">43</span>,
                                                            moleculeOntogenies <span class="op">=</span> <span class="va">myProteinOntogeny</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">individualCharacterstics</span><span class="op">)</span>
<span class="co">#&gt; IndividualCharacteristics: </span>
<span class="co">#&gt;   Species: Human</span>
<span class="co">#&gt;   Population: Japanese_Population</span>
<span class="co">#&gt;   Gender: FEMALE</span>
<span class="co">#&gt;   Age: 43.00 [year(s)]</span>
<span class="co">#&gt;   Gestational age: 40.00 [week(s)]</span>
<span class="co">#&gt;   Weight: 75.00 [kg]</span>
<span class="co">#&gt;   Height: 1.75 [m]</span>
<span class="co">#&gt;   Molecule MyProtein with ontogeny CYP3A4:</span>

<span class="va">individual</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/createIndividual.html">createIndividual</a></span><span class="op">(</span>individualCharacteristics <span class="op">=</span> <span class="va">individualCharacterstics</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Michael Sevestre, Pavel Balazki, Juri Solodenko.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link external-link">pkgdown</a> 1.6.1.9001.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
