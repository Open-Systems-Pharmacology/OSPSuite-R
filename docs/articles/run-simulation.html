<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ospsuite">
<title>Running a simulation • ospsuite</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Running a simulation">
<meta property="og:description" content="ospsuite">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    <a class="navbar-brand me-2" href="../index.html">ospsuite</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">10.0.72</small>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-2">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/ospsuite.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Primary functions</h6>
    <a class="dropdown-item" href="../articles/load-get.html">Loading a simulation and accessing entities</a>
    <a class="dropdown-item" href="../articles/set-values.html">Changing parameter and molecule start values</a>
    <a class="dropdown-item" href="../articles/run-simulation.html">Running a simulation</a>
    <a class="dropdown-item" href="../articles/pk-analysis.html">Calculating PK parameters of simulation outputs</a>
    <a class="dropdown-item" href="../articles/sensitivity-analysis.html">Sensitivity analysis</a>
    <a class="dropdown-item" href="../articles/create-individual.html">Creating individuals</a>
    <a class="dropdown-item" href="../articles/create-run-population.html">Population simulations</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Miscellaneous</h6>
    <a class="dropdown-item" href="../articles/efficient-calculations.html">Efficient calculation</a>
    <a class="dropdown-item" href="../articles/table-parameters.html">Table parameters</a>
    <a class="dropdown-item" href="../articles/unit-conversion.html">Dimensions and Units</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/open-systems-pharmacology/ospsuite-r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
  </div>
</nav><div class="container template-article" id="container">

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <img src="" class="logo" alt=""><h1>Running a simulation</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/open-systems-pharmacology/ospsuite-r/blob/HEAD/vignettes/run-simulation.Rmd" class="external-link"><code>vignettes/run-simulation.Rmd</code></a></small>
      <div class="d-none name"><code>run-simulation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="running-individual-simulation-and-retrieving-the-results">Running individual simulation and retrieving the results<a class="anchor" aria-label="anchor" href="#running-individual-simulation-and-retrieving-the-results"></a>
</h2>
<p>Once the simulation is loaded (see <a href="load-get.html">Loading a simulation and accessing entities</a>), it can be run using <code><a href="../reference/runSimulations.html">runSimulations()</a></code> to produce an object of the class <code>SimulationResults</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/open-systems-pharmacology/ospsuite-r" class="external-link">ospsuite</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: rClr</span>
<span class="co">#&gt; Loading the dynamic library for Microsoft .NET runtime...</span>
<span class="co">#&gt; Loaded Common Language Runtime version 4.0.30319.42000</span>

<span class="co"># Load the simulation</span>
<span class="va">simFilePath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Aciclovir.pkml"</span>, package <span class="op">=</span> <span class="st">"ospsuite"</span><span class="op">)</span>
<span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loadSimulation.html">loadSimulation</a></span><span class="op">(</span><span class="va">simFilePath</span><span class="op">)</span>

<span class="va">simulationResults</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runSimulations.html">runSimulations</a></span><span class="op">(</span>simulations <span class="op">=</span> <span class="va">sim</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">simulationResults</span><span class="op">)</span>
<span class="co">#&gt; SimulationResults: </span>
<span class="co">#&gt;    Number of individuals: 1</span></code></pre></div>
<p>The advantage of storing the results in a object is the option to keep different results of the same simulation produced with different settings (e.g., model parameters).</p>
<p>Simulated time-value pairs for a specific output from the <code>SimulationResults</code>-object can be accessed with the method <code>getOutputValues</code>. The user can provide either the path(s) of the output (which can be a molecule, a parameter, or an observer), or the object(s) of the type <code>Molecule</code>, <code>Parameter</code>, or <code>Quantity</code> (for observers) with the argument <code>quantitiesOrPaths</code>. If no output is specified, all outputs available in the simulation results are returned.</p>
<p>The paths of all available outputs can be accessed via</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">simulationResults</span><span class="op">$</span><span class="va">allQuantityPaths</span>
<span class="co">#&gt; [1] "Organism|PeripheralVenousBlood|Aciclovir|Plasma (Peripheral Venous Blood)"</span></code></pre></div>
<p><code>getOutputValues</code> returns a list with two entries: <code>data</code> and <code>metadata</code>:</p>
<ul>
<li>
<p><code>data</code> is a dataframe with two predefined columns (IndividualId and Time) as well as one column for each requested output</p>
<ul>
<li>
<code>IndividualId</code> (not relevant for an individual simulation)</li>
<li>
<code>Time</code> a vector with simulated time values (in minutes, equal for all outputs)</li>
<li>a vector with simulated entries for each output requested.</li>
</ul>
</li>
<li><p><code>metaData</code> is a list containing one entry for each requested output. Each entry contains information pertinent to the output such as its dimension or the unit.</p></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get simulated results by path</span>
<span class="va">resultsPath</span> <span class="op">&lt;-</span> <span class="va">simulationResults</span><span class="op">$</span><span class="va">allQuantityPaths</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">resultsPath</span><span class="op">)</span>
<span class="co">#&gt; [1] "Organism|PeripheralVenousBlood|Aciclovir|Plasma (Peripheral Venous Blood)"</span>

<span class="va">resultsData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getOutputValues.html">getOutputValues</a></span><span class="op">(</span><span class="va">simulationResults</span>, quantitiesOrPaths <span class="op">=</span> <span class="va">resultsPath</span><span class="op">)</span>

<span class="va">resultsTime</span> <span class="op">&lt;-</span> <span class="va">resultsData</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">Time</span>
<span class="va">resultsValues</span> <span class="op">&lt;-</span> <span class="va">resultsData</span><span class="op">$</span><span class="va">data</span><span class="op">$</span><span class="va">`Organism|PeripheralVenousBlood|Aciclovir|Plasma (Peripheral Venous Blood)`</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">resultsTime</span>, <span class="va">resultsValues</span>, type <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></code></pre></div>
<p><img src="run-simulation_files/figure-html/getOutputValues-1.png" width="700"></p>
<p>The results can be stored in and imported from a *.csv file with the methods <code>exportResultsToCSV</code> and <code>importResultsFromCSV</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load and run the simulation</span>
<span class="va">simFilePath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Aciclovir.pkml"</span>, package <span class="op">=</span> <span class="st">"ospsuite"</span><span class="op">)</span>
<span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loadSimulation.html">loadSimulation</a></span><span class="op">(</span><span class="va">simFilePath</span><span class="op">)</span>
<span class="va">simulationResults</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runSimulations.html">runSimulations</a></span><span class="op">(</span>simulations <span class="op">=</span> <span class="va">sim</span><span class="op">)</span>

<span class="co"># Export to csv</span>
<span class="va">csvResultsPath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"SimResults.csv"</span>, package <span class="op">=</span> <span class="st">"ospsuite"</span><span class="op">)</span>
<span class="fu"><a href="../reference/exportResultsToCSV.html">exportResultsToCSV</a></span><span class="op">(</span>results <span class="op">=</span> <span class="va">simulationResults</span>, filePath <span class="op">=</span> <span class="va">csvResultsPath</span><span class="op">)</span>

<span class="co"># Load from csv</span>
<span class="va">resultsLoaded</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/importResultsFromCSV.html">importResultsFromCSV</a></span><span class="op">(</span>filePaths <span class="op">=</span> <span class="va">csvResultsPath</span>, simulation <span class="op">=</span> <span class="va">sim</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">resultsLoaded</span><span class="op">)</span>
<span class="co">#&gt; SimulationResults: </span>
<span class="co">#&gt;    Number of individuals: 1</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="running-multiple-individual-simulations-and-retrieving-the-results">Running multiple individual simulations and retrieving the results<a class="anchor" aria-label="anchor" href="#running-multiple-individual-simulations-and-retrieving-the-results"></a>
</h2>
<p>In some cases, the user might want to run multiple simulations in parallel. This can be achieved easily by simply passing a list of simulations to the <code><a href="../reference/runSimulations.html">runSimulations()</a></code> function. However, only individual simulations (i.e., the <code>population</code> argument must remain empty) are supported.</p>
<p>By default, the simulations will be executed in parallel by using up to all cores available on the machine minus 1. So if there are 8 cores and the user simulates 4 simulations, 4 cores will be used. On the other hand, if the user simulates 10 simulations with only 8 cores available, 7 will be used and then the first 3 available.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Load and run multiple simulations concurrently.</span>
<span class="va">simFilePath</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"Aciclovir.pkml"</span>, package <span class="op">=</span> <span class="st">"ospsuite"</span><span class="op">)</span>

<span class="co"># We load 3 times the same simulation for convenience. But in real life scenarios,</span>
<span class="co"># they should be different simulations</span>
<span class="va">sim1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loadSimulation.html">loadSimulation</a></span><span class="op">(</span><span class="va">simFilePath</span><span class="op">)</span>
<span class="va">sim2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loadSimulation.html">loadSimulation</a></span><span class="op">(</span><span class="va">simFilePath</span><span class="op">)</span>
<span class="va">sim3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/loadSimulation.html">loadSimulation</a></span><span class="op">(</span><span class="va">simFilePath</span><span class="op">)</span>

<span class="va">simulationResults</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runSimulations.html">runSimulations</a></span><span class="op">(</span>simulations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">sim1</span>, <span class="va">sim2</span>, <span class="va">sim3</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The results in this case will be a named list of <code>SimulationResults</code>-object , i.e. one for each simulation. The names of the entries of the list are the ids of the simulation to which the results correspond. This way, it is easy to retrieve the correct results for the specific simulation</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get the id of the second simulation</span>
<span class="va">id</span> <span class="op">&lt;-</span> <span class="va">sim2</span><span class="op">$</span><span class="va">id</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>
<span class="co">#&gt; [1] "o2MGIgWl0kOqHd5Es6O0hA"</span>
<span class="co"># get the corresponding result</span>
<span class="va">sim2Results</span> <span class="op">&lt;-</span> <span class="va">simulationResults</span><span class="op">[[</span><span class="va">id</span><span class="op">]</span><span class="op">]</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sim2Results</span><span class="op">$</span><span class="va">simulation</span><span class="op">$</span><span class="va">id</span><span class="op">)</span>
<span class="co">#&gt; [1] "o2MGIgWl0kOqHd5Es6O0hA"</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adding-new-outputs">Adding new outputs<a class="anchor" aria-label="anchor" href="#adding-new-outputs"></a>
</h2>
<p>By default, only outputs that were selected in PK-Sim or MoBi prior to the export of the simulation to <code>pkml</code> are generated. The user can add new outputs to the simulation with the method <code>addOutputs</code>. The outputs can be provided either as objects of the type(s) <code>Molecule</code>, <code>Parameter</code>, or <code>Quantity</code>, or as path strings. The output list is a property of the <code>simulation</code>. After adding or removing outputs, the corresponding simulation needs to be re-run in order to generate updated results.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Clear the list of generated outputs</span>
<span class="fu"><a href="../reference/clearOutputs.html">clearOutputs</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span>

<span class="co"># Add new outputs as objects</span>
<span class="va">molecule</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getMolecule.html">getMolecule</a></span><span class="op">(</span><span class="st">"Organism|Kidney|Intracellular|Aciclovir"</span>, <span class="va">sim</span><span class="op">)</span>
<span class="va">observer</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getQuantity.html">getQuantity</a></span><span class="op">(</span><span class="st">"Organism|Lumen|Aciclovir|Fraction dissolved"</span>, <span class="va">sim</span><span class="op">)</span>

<span class="fu"><a href="../reference/addOutputs.html">addOutputs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">molecule</span>, <span class="va">observer</span><span class="op">)</span>, simulation <span class="op">=</span> <span class="va">sim</span><span class="op">)</span>

<span class="co"># Add new outputs as path strings</span>
<span class="fu"><a href="../reference/addOutputs.html">addOutputs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
  <span class="st">"Organism|Lumen|Stomach|Aciclovir"</span>,
  <span class="st">"Organism|PeripheralVenousBlood|Aciclovir|Whole Blood (Peripheral Venous Blood)"</span>
<span class="op">)</span>,
simulation <span class="op">=</span> <span class="va">sim</span>
<span class="op">)</span>

<span class="co"># Run simulation</span>
<span class="va">simulationResults</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/runSimulations.html">runSimulations</a></span><span class="op">(</span>simulations <span class="op">=</span> <span class="va">sim</span><span class="op">)</span>

<span class="co"># Retrieve all generated outputs (e.g. omitting the quantitiesOrPaths property</span>
<span class="co"># will return all available values)</span>
<span class="va">resultsData</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getOutputValues.html">getOutputValues</a></span><span class="op">(</span><span class="va">simulationResults</span><span class="op">)</span>

<span class="co"># Note that "Organism|PeripheralVenousBlood|Aciclovir|Plasma (Peripheral Venous Blood)"</span>
<span class="co"># is not in the list of generated results any more</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">resultsData</span><span class="op">$</span><span class="va">data</span><span class="op">)</span>
<span class="co">#&gt; [1] "IndividualId"                                                                  </span>
<span class="co">#&gt; [2] "Time"                                                                          </span>
<span class="co">#&gt; [3] "Organism|Kidney|Intracellular|Aciclovir"                                       </span>
<span class="co">#&gt; [4] "Organism|Lumen|Stomach|Aciclovir"                                              </span>
<span class="co">#&gt; [5] "Organism|PeripheralVenousBlood|Aciclovir|Whole Blood (Peripheral Venous Blood)"</span>
<span class="co">#&gt; [6] "Organism|Lumen|Aciclovir|Fraction dissolved"</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="changing-simulation-intervals">Changing simulation intervals<a class="anchor" aria-label="anchor" href="#changing-simulation-intervals"></a>
</h2>
<p>The simulation interval (i.e., the simulation times at which results are stored) are stored as the property <code>$outputSchema</code> of a <code>Simulation</code> object.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sim</span><span class="op">$</span><span class="va">outputSchema</span><span class="op">)</span>
<span class="co">#&gt; OutputSchema: </span>
<span class="co">#&gt; Interval: </span>
<span class="co">#&gt;    Name: Simulation interval high resolution </span>
<span class="co">#&gt;    Start time: 0.00 [min] </span>
<span class="co">#&gt;    End time: 15.00 [min] </span>
<span class="co">#&gt;    Resolution: 1.00 [pts/min] </span>
<span class="co">#&gt; Interval: </span>
<span class="co">#&gt;    Name: Simulation Interval 1 </span>
<span class="co">#&gt;    Start time: 15.00 [min] </span>
<span class="co">#&gt;    End time: 1440.00 [min] </span>
<span class="co">#&gt;    Resolution: 0.33333 [pts/min] </span>
<span class="co">#&gt; Interval: </span>
<span class="co">#&gt;    Name: Simulation Interval 2 </span>
<span class="co">#&gt;    Start time: 120.00 [min] </span>
<span class="co">#&gt;    End time: 1440.00 [min] </span>
<span class="co">#&gt;    Resolution: 0.066667 [pts/min]</span></code></pre></div>
<p>To change the simulation interval, the user can use one of the functions <code><a href="../reference/clearOutputIntervals.html">clearOutputIntervals()</a></code>, <code><a href="../reference/addOutputInterval.html">addOutputInterval()</a></code>, and <code><a href="../reference/setOutputInterval.html">setOutputInterval()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Remove all output intervals - simulation not possible!</span>
<span class="fu"><a href="../reference/clearOutputIntervals.html">clearOutputIntervals</a></span><span class="op">(</span>simulation <span class="op">=</span> <span class="va">sim</span><span class="op">)</span>
<span class="fu"><a href="../reference/runSimulations.html">runSimulations</a></span><span class="op">(</span>simulations <span class="op">=</span> <span class="va">sim</span><span class="op">)</span>
<span class="co">#&gt; Error in rClr::clrCall(simulationRunner, "Run", simulationRunArgs): Type:    OSPSuite.Utility.Exceptions.OSPSuiteException</span>
<span class="co">#&gt; Message: Time points output schema is empty</span>
<span class="co">#&gt; Method:  Void RunSimulation()</span>
<span class="co">#&gt; Stack trace:</span>
<span class="co">#&gt;    at OSPSuite.SimModel.Simulation.RunSimulation()</span>
<span class="co">#&gt;    at OSPSuite.Core.Domain.Services.SimModelManager.simulate()</span>
<span class="co">#&gt;    at OSPSuite.Core.Domain.Services.SimModelManager.doIfNotCanceled(Action actionToExecute)</span>
<span class="co">#&gt;    at OSPSuite.Core.Domain.Services.SimModelManager.RunSimulation(IModelCoreSimulation simulation, SimulationRunOptions simulationRunOptions)</span>
<span class="co">#&gt;    at OSPSuite.R.Services.SimulationRunner.&lt;&gt;c__DisplayClass13_0.&lt;runAsync&gt;b__0()</span>
<span class="co">#&gt;    at System.Threading.Tasks.Task`1.InnerInvoke()</span>
<span class="co">#&gt;    at System.Threading.Tasks.Task.Execute()</span>

<span class="co"># Add an interval</span>
<span class="fu"><a href="../reference/addOutputInterval.html">addOutputInterval</a></span><span class="op">(</span>simulation <span class="op">=</span> <span class="va">sim</span>, startTime <span class="op">=</span> <span class="fl">0</span>, endTime <span class="op">=</span> <span class="fl">20</span>, resolution <span class="op">=</span> <span class="fl">60</span>, intervalName <span class="op">=</span> <span class="st">"highRes"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sim</span><span class="op">$</span><span class="va">outputSchema</span><span class="op">)</span>
<span class="co">#&gt; OutputSchema: </span>
<span class="co">#&gt; Interval: </span>
<span class="co">#&gt;    Name: highRes </span>
<span class="co">#&gt;    Start time: 0.00 [min] </span>
<span class="co">#&gt;    End time: 20.00 [min] </span>
<span class="co">#&gt;    Resolution: 60.00 [pts/min]</span>

<span class="co"># Add a second interval</span>
<span class="fu"><a href="../reference/addOutputInterval.html">addOutputInterval</a></span><span class="op">(</span>simulation <span class="op">=</span> <span class="va">sim</span>, startTime <span class="op">=</span> <span class="fl">30</span>, endTime <span class="op">=</span> <span class="fl">2000</span>, resolution <span class="op">=</span> <span class="fl">4</span>, intervalName <span class="op">=</span> <span class="st">"lowRes"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sim</span><span class="op">$</span><span class="va">outputSchema</span><span class="op">)</span>
<span class="co">#&gt; OutputSchema: </span>
<span class="co">#&gt; Interval: </span>
<span class="co">#&gt;    Name: highRes </span>
<span class="co">#&gt;    Start time: 0.00 [min] </span>
<span class="co">#&gt;    End time: 20.00 [min] </span>
<span class="co">#&gt;    Resolution: 60.00 [pts/min] </span>
<span class="co">#&gt; Interval: </span>
<span class="co">#&gt;    Name: lowRes </span>
<span class="co">#&gt;    Start time: 30.00 [min] </span>
<span class="co">#&gt;    End time: 2000.00 [min] </span>
<span class="co">#&gt;    Resolution: 4.00 [pts/min]</span>

<span class="co"># Replace the existing interval(s) with a new one</span>
<span class="fu"><a href="../reference/setOutputInterval.html">setOutputInterval</a></span><span class="op">(</span>simulation <span class="op">=</span> <span class="va">sim</span>, startTime <span class="op">=</span> <span class="fl">0</span>, endTime <span class="op">=</span> <span class="fl">2000</span>, resolution <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">sim</span><span class="op">$</span><span class="va">outputSchema</span><span class="op">)</span>
<span class="co">#&gt; OutputSchema: </span>
<span class="co">#&gt; Interval: </span>
<span class="co">#&gt;    Name: Output interval </span>
<span class="co">#&gt;    Start time: 0.00 [min] </span>
<span class="co">#&gt;    End time: 2000.00 [min] </span>
<span class="co">#&gt;    Resolution: 4.00 [pts/min]</span></code></pre></div>
</div>
  </div>
 <div class="col-md-3" id="pkgdown-sidebar">
        <nav id="toc"><h2>On this page</h2>
    </nav>
</div>

</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Michael Sevestre, Pavel Balazki, Juri Solodenko.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.9000.9000.9000.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
