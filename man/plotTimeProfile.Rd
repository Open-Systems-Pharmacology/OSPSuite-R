% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot-with-ospsuite-plots.R
\name{plotTimeProfile}
\alias{plotTimeProfile}
\title{Create Time Profile Plot}
\usage{
plotTimeProfile(
  plotData,
  metaData = NULL,
  mapping = ggplot2::aes(),
  observedMapping = NULL,
  xUnit = NULL,
  yUnit = NULL,
  y2Unit = NULL,
  aggregation = "quantiles",
  quantiles =
    ospsuite.plots::getOspsuite.plots.option(ospsuite.plots::OptionKeys$Percentiles)[c(1,
    3, 5)],
  nsd = 1,
  showLegendPerDataset = "none",
  ...
)
}
\arguments{
\item{plotData}{An object of class \code{DataCombined} or a \code{data.table}. If a
\code{data.table}, it must include the following:
\itemize{
\item \code{xValues}: Numeric time points.
\item \code{yValues}: Observed or simulated values (numeric).
\item \code{group}: Grouping variable (factor or character).
\item \code{name}: Name for the dataset (factor or character).
\item \code{xUnit}: Unit of the x-axis values (character).
\item \code{yUnit}: Unit of the y-axis values (character).
\item \code{dataType}: Specifies data typeâ€”either \code{observed} or \code{simulated}.
\item Optional:
\itemize{
\item \code{yErrorType}: Type of y error, relative to \code{ospsuite::DataErrorType}.
\item \code{yErrorValues}: Numeric error values.
\item \code{yMin}, \code{yMax}: Custom ranges for y-axis instead of error types.
\item \code{IndividualId}: Used for aggregation of simulated population data.
}
}}

\item{metaData}{A list containing metadata for the plot. If NULL, a default
list is constructed from the data. Expected structure includes information
about dimensions and units for both x and y axes.}

\item{mapping}{A ggplot2 aesthetic mapping object. Default is
\code{ggplot2::aes()}. This is added or replaces the default mapping constructed
by the data.}

\item{observedMapping}{A ggplot2 aesthetic mapping for observed data. Default
is NULL. Then a copy of mapping without line typical aesthtics like linetype and linewidth is used.}

\item{xUnit}{A character string specifying the target unit for the x-axis.
If \code{NULL} (default), the most frequent unit in the data is used. For
available units, see \code{ospsuite::ospUnits}.}

\item{yUnit}{A character string specifying the target unit for the primary
y-axis. If \code{NULL} (default), the most frequent unit in the data is used.
For available units, see \code{ospsuite::ospUnits}.}

\item{y2Unit}{A character string specifying the target unit for the secondary
y-axis (only applicable when data contains two y-dimensions). If \code{NULL}
(default), the most frequent unit in the data is used.}

\item{aggregation}{The type of the aggregation of simulated data. One of
\code{quantiles} (Default), \code{arithmetic} or \code{geometric} (full list in
\code{ospsuite::DataAggregationMethods}). Will replace \code{yValues} by the median,
arithmetic or geometric average and add a set of upper and lower bounds
(\code{yMin} and \code{yMax}). It is only applied if the simulated data represents a
population.}

\item{quantiles}{A numerical vector with quantile values (Default: \code{c(0.05, 0.50, 0.95)}) to be plotted. Ignored if \code{aggregation} is not \code{quantiles}.}

\item{nsd}{Optional parameter specifying the number of standard deviations to
plot above and below the mean (used for error bars when aggregation is
"arithmetic" or "geometric"). Ignored if \code{aggregation} is  \code{quantiles}.}

\item{showLegendPerDataset}{Controls display of separate legend entries for
individual datasets. One of:
\itemize{
\item \code{"none"} (default): No per-dataset differentiation. Only group-level legend.
\item \code{"all"}: Differentiate both observed (via \code{shape}) and simulated (via \code{linetype}).
\item \code{"observed"}: Differentiate only observed data via different shapes.
\item \code{"simulated"}: Differentiate only simulated data via different line types.
}

User-provided \code{mapping} and \code{observedMapping} will override internal settings.
A warning is issued if the override removes per-dataset differentiation.}

\item{...}{
  Arguments passed on to \code{\link[ospsuite.plots:plotTimeProfile]{ospsuite.plots::plotTimeProfile}}
  \describe{
    \item{\code{xScale}}{either 'linear' then \code{ggplot2::scale_x_continuous()} or 'log' then \code{ggplot2::scale_x_log10()} is used}
    \item{\code{xScaleArgs}}{list of arguments passed to \code{ggplot2::scale_x_continuous()} or \code{ggplot2::scale_x_log10()}}
    \item{\code{yScale}}{either 'linear' then \code{ggplot2::scale_y_continuous()} or 'log' then \code{ggplot2::scale_y_log10()} is used}
    \item{\code{yScaleArgs}}{list of arguments passed to \code{ggplot2::scale_y_continuous()} or \code{ggplot2::scale_y_log10()}}
    \item{\code{y2ScaleArgs}}{list of arguments passed to \code{ggplot2::sec_axis()}, trans, break are set by code}
    \item{\code{plotObject}}{An optional \code{ggplot} object on which to add the plot layers}
    \item{\code{geomLineAttributes}}{A \code{list} with arguments which are passed on to the call \code{ggplot2::geom_line}}
    \item{\code{geomRibbonAttributes}}{A \code{list} with arguments which are passed on to the call \code{ggplot2::geom_ribbon}}
    \item{\code{geomErrorbarAttributes}}{A \code{list} with arguments which are passed on to the call \code{ggplot2::geom_errorbar}}
    \item{\code{geomLLOQAttributes}}{A \code{list} with arguments which are passed on to the call \code{ggplot2::geom_hline}}
    \item{\code{groupAesthetics}}{vector of aesthetics, which are used for columns mapped with \code{groupby},}
  }}
}
\value{
A \code{ggplot2} plot object representing the time profile.
}
\description{
Creates a time profile plot for given data.

This function generates a time profile plot using ggplot2, where the data
is grouped by a column named "group".
}
\details{
\subsection{Automatic Unit Conversion}{

When using a \code{DataCombined} object, the function automatically converts mixed
units to a common unit. The target unit is determined by the most frequently
occurring unit in the observed data (or simulated data if no observed data
exists). Concentration dimensions (\code{Concentration (mass)} and \code{Concentration (molar)}) are treated as compatible and can be converted between each other
if molecular weight is available.
}

\subsection{Mixed Error Types}{

The function automatically handles data containing different error type
specifications:
\itemize{
\item If all data uses the same error type (\code{ArithmeticStdDev} or \code{GeometricStdDev}),
it is passed directly to the plotting function.
\item If data contains \strong{mixed error types}, they are automatically converted to
\code{yMin}/\code{yMax} bounds:
\itemize{
\item \code{ArithmeticStdDev}: \code{yMin = yValues - yErrorValues}, \code{yMax = yValues + yErrorValues}
\item \code{GeometricStdDev}: \code{yMin = yValues / yErrorValues}, \code{yMax = yValues * yErrorValues}
}
\item For custom error types (not \code{ArithmeticStdDev} or \code{GeometricStdDev}), provide
error bounds directly in \code{yMin} and \code{yMax} columns.
}
}
}
\examples{
\dontrun{
# Generate a time profile plot for the provided data
plotTimeProfile(myDataCombined,
  xUnit = ospUnits$Time$h,
  yUnit = ospUnits$`Concentration [mass]`$`mg/l`)

# Show individual dataset names for observed data only
plotTimeProfile(manyObsDC, showLegendPerDataset = "observed")

# Show individual dataset names for simulated data only
plotTimeProfile(manySimDC, showLegendPerDataset = "simulated")

# Show individual dataset names for both observed and simulated
plotTimeProfile(manyObsSimDC, showLegendPerDataset = "all")
}
}
\seealso{
Other plot functions based on ospsuite.plots: 
\code{\link{plotPredictedVsObserved}()},
\code{\link{plotQuantileQuantilePlot}()},
\code{\link{plotResidualsAsHistogram}()},
\code{\link{plotResidualsVsCovariate}()}
}
\concept{plot functions based on ospsuite.plots}
